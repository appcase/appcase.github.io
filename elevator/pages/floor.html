<div class='modaltnavbar'>
    <div class='navappnameflr' style='font-size:19px;float:left;margin-left:7px;display:flex;justify-content: center;align-items: center;height:50px;color:lime;'>Floor Details</div>
    <div style='float:right;margin-right:16px;display:flex;justify-content: center;align-items: center;height:50px;'>
        <i style='cursor:pointer;' class='fas fa-lg fa-expand lime fscr' onclick='eg.showFScreen()'></i>&emsp;&emsp;
        <i class="far fa-2x fa-times-circle lime navicon" onclick="eg.hideModal();"></i>
    </div>
</div>
<div id="modalbodybnav" class='modalbodybnavflr'><div>Floor Details</div></div>
<div class="modalbnavbar modalbnavbarflr"><div></div></div>


<script>
    $(document).ready(function(){
        if(eg.gplay.fullscreen) $('.fscr').removeClass('fa-expand').addClass('fa-compress');
        else $('.fscr').removeClass('fa-compress').addClass('fa-expand');
        eg.createBNavFlr();
        eg.showDetailsFlr();
    });

    eg.assignEle = function(dir, id, cell){
        let ele = $(cell).closest('td').index() - 1;
        let arr = dir=='U' ? 'visitorsU' : 'visitorsD';
        for(let i=0; i<eg.gplay.floors[eg.gplay.flrtapped][arr].length; i++){
            if(eg.gplay.floors[eg.gplay.flrtapped][arr][i].id==id){ 
                if(eg.gplay.floors[eg.gplay.flrtapped][arr][i].assignedE!=ele){
                    eg.gplay.floors[eg.gplay.flrtapped][arr][i].assignedE = ele;
                    $(cell).closest('tr').find('td').css('background-color', 'transparent');
                    $(cell).closest('td').css('background-color', 'lightgreen');
                }else{
                    eg.gplay.floors[eg.gplay.flrtapped][arr][i].assignedE = "X";
                    $(cell).closest('td').css('background-color', 'transparent');
                }
            }
        }
    };

    eg.createBNavFlr = function(){
        let html = '<table style="width:100%;border:0;">';
        html += '<tr style="width:100%;border:0;"><td style="vertical-align:middle;height:50px;border:0;width:35%;" onclick="eg.changeFloor(1);"><i class="fas fa-lg fa-arrow-circle-left lime"></i><br><span style="font-size:15px;font-weight:500;color:white;">Lower Floor</span></td><td style="vertical-align:middle;height:50px;border:0;width:30%;" onclick="eg.hideModal();"><i class="far fa-lg fa-times-circle lime"></i><br><span style="font-size:15px;font-weight:500;color:white;">Close</span></td><td style="vertical-align:middle;height:50px;border:0;width:35%;" onclick="eg.changeFloor(-1);"><i class="fas fa-lg fa-arrow-circle-right lime"></i><br><span style="font-size:15px;font-weight:500;color:white;">Upper Floor</span></td></tr></table>';
        $('.modalbnavbarflr').html(html);
    };

    eg.changeFloor = function(x){
        if(eg.gplay.flrtapped == 0 && x == -1) {
            eg.toastMessage('No floors above!', 1000);
            return;
        }
        if(eg.gplay.flrtapped == eg.gsets.floors && x == 1) {
            eg.toastMessage('No floors below!', 1000);
            return;
        }
        eg.gplay.flrtapped = eg.gplay.flrtapped + x;
        eg.showDetailsFlr();
    };
</script>
